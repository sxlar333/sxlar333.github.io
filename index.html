<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Page 2</title>
  <style>
    body { display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; font-family: Arial, sans-serif; transition: background-color 0.3s; }
    .container { text-align: center; width: 100%; }
    h1 { font-size: 48px; margin-bottom: 30px; }
    button { padding: 10px 20px; font-size: 16px; cursor: pointer; margin: 10px; }
    #upgradeButton { padding: 15px 30px; font-size: 18px; background-color: #f39c12; color: white; border: none; border-radius: 5px; cursor: pointer; transition: background-color 0.2s; margin-bottom: 20px; }
    #upgradeButton:hover:not(:disabled) { background-color: #e67e22; }
    #upgradeButton:disabled { background-color: #95a5a6; cursor: not-allowed; opacity: 0.6; }
    #circle { width: 100px; height: 100px; background-color: #3498db; border-radius: 50%; margin: 20px auto; cursor: pointer; transition: transform 0.2s; }
    #circle:hover { transform: scale(1.1); }
    #resetButton {
      position: absolute;
      top: 30px;
      left: 50%;
      transform: translateX(-50%);
      padding: 20px 50px;
      font-size: 32px;
      background-color: #e74c3c;
      color: white;
      border: none;
      border-radius: 15px;
      font-weight: bold;
      cursor: pointer;
      transition: background-color 0.2s;
      z-index: 1000;
    }
    #resetButton:hover {
      background-color: #c0392b;
    }
  </style>
</head>
<body>
  <button id="resetButton">RESET GAME</button>
  <div class="container">
    <button id="upgradeButton">Buy Upgrade: 10 clicks</button>
    <p id="clickCount">Clicks: 0</p>
    <div id="circle"></div>
    <h1>my html website is very epik</h1>
    <button onclick="window.location.href='test.html'">Return to test.html</button>
    <button onclick="toggleColorChange()">Change Background Color</button>
  </div>

  <script>
    let colorInterval;

    // Default values for a fresh start
    const DEFAULT_CLICK_PRICE = 10;
    const CPS_MULTIPLIER = 2;

    // Load from localStorage, or defaults
    let clicks = parseInt(localStorage.getItem('clicks')) || 0;
    let upgradePrice = parseFloat(localStorage.getItem('upgradePrice')) || DEFAULT_CLICK_PRICE;
    let clicksPerSecond = parseInt(localStorage.getItem('clicksPerSecond')) || 0;

    const upgradeButton = document.getElementById('upgradeButton');
    const clickCountDisplay = document.getElementById('clickCount');
    const circle = document.getElementById('circle');
    const resetButton = document.getElementById('resetButton');

    circle.addEventListener('click', () => {
      clicks++;
      saveProgress();
      updateDisplay();
    });

    upgradeButton.addEventListener('click', () => {
      if (clicks >= Math.ceil(upgradePrice)) {
        clicks -= Math.ceil(upgradePrice);
        upgradePrice = upgradePrice * 2.50; // Price multiplies by 10% each time (increases price)
        clicksPerSecond = clicksPerSecond === 0 ? 1 : clicksPerSecond * CPS_MULTIPLIER;
        saveProgress();
        updateDisplay();
      }
    });

    resetButton.addEventListener('click', () => {
      clicks = 0;
      upgradePrice = DEFAULT_CLICK_PRICE;
      clicksPerSecond = 0;
      localStorage.clear();
      updateDisplay();
    });

    function updateDisplay() {
      clickCountDisplay.textContent = `Clicks: ${clicks}`;
      upgradeButton.textContent = `Buy Upgrade: ${Math.ceil(upgradePrice)} clicks`;
      upgradeButton.disabled = clicks < Math.ceil(upgradePrice);
    }

    function saveProgress() {
      localStorage.setItem('clicks', clicks);
      localStorage.setItem('upgradePrice', upgradePrice);
      localStorage.setItem('clicksPerSecond', clicksPerSecond);
    }

    setInterval(() => {
      if (clicksPerSecond > 0) {
        clicks += clicksPerSecond;
        saveProgress();
        updateDisplay();
      }
    }, 1000);

    function toggleColorChange() {
      if (colorInterval) {
        clearInterval(colorInterval);
        colorInterval = null;
      } else {
        colorInterval = setInterval(() => {
          const r = Math.floor(Math.random() * 256);
          const g = Math.floor(Math.random() * 256);
          const b = Math.floor(Math.random() * 256);
          document.body.style.backgroundColor = `rgb(${r}, ${g}, ${b})`;
        }, 1000);
      }
    }
    updateDisplay();
  </script>
</body>
</html>
